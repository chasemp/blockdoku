*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;line-height:1.6;background:linear-gradient(135deg,var(--bg-color) 0%,var(--header-bg) 100%);color:var(--text-color);transition:all .3s ease;min-height:100vh}#app{min-height:100vh;display:flex;flex-direction:column}.header{background:linear-gradient(135deg,var(--header-bg) 0%,var(--primary-color) 100%);padding:1.65rem 2rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid var(--border-color)}.utility-bar{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;align-items:center;gap:.5rem;padding:.5rem 1rem;border-bottom:1px solid var(--border-color);background:linear-gradient(135deg,var(--header-bg) 0%,var(--cell-bg) 100%);transition:all .3s ease;min-height:3rem}.utility-slot{display:flex;justify-content:center;align-items:center;min-height:2.5rem;position:relative}.utility-item{width:100%;height:100%;display:flex;justify-content:center;align-items:center;position:relative;transition:all .3s ease}.utility-item:not(.active){opacity:.3;transform:scale(.95)}.utility-item:not(.active):before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:20px;height:20px;border:2px dashed rgba(255,255,255,.2);border-radius:50%;z-index:1}.utility-item:not(.active) .utility-item-content{opacity:0}.utility-item.active{opacity:1;transform:scale(1);animation:utilityGlow 2s ease-in-out infinite alternate}.utility-item.active .utility-item-content{background:#007bff1a;border:1px solid rgba(0,123,255,.3);box-shadow:0 0 10px #007bff33}@keyframes utilityGlow{0%{box-shadow:0 0 5px #007bff4d;filter:brightness(1)}to{box-shadow:0 0 15px #007bff99;filter:brightness(1.1)}}.utility-item.active .personal-bests{background:#ffd70026;border-color:#ffd70066;color:gold}.utility-item.active .timer{background:#ff444426;border-color:#f446}.utility-item.active .speed-bonus{background:linear-gradient(135deg,#ff6b35,#f7931e);border-color:#ff8c42;box-shadow:0 0 15px #ff6b3566}.utility-item.active .hint-controls{background:#ffd70026;border-color:#ffd70066}.utility-slot-left{justify-content:flex-start}.utility-slot-center,.utility-slot-center-right{justify-content:center}.utility-slot-right{justify-content:flex-end}.utility-bar:not(.has-content){padding:.1rem 1rem;min-height:1rem;opacity:.7}.utility-bar.has-content{padding:.5rem 1rem;min-height:3rem;opacity:1}.utility-item-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%;transition:all .3s ease}.personal-bests{display:inline-flex;align-items:center;gap:.75rem;font-size:.85rem;color:var(--text-muted);opacity:.9;white-space:nowrap;padding:.5rem;border-radius:8px;background:#ffffff1a;border:1px solid rgba(255,255,255,.2)}.personal-bests .pb-item{display:inline-flex;align-items:baseline;gap:.25rem}.personal-bests .pb-label{font-weight:600;opacity:.8}.personal-bests .pb-value{font-variant-numeric:tabular-nums}.header h1{font-size:1.8rem;font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);text-shadow:0 2px 4px rgba(0,0,0,.3);letter-spacing:-.5px}.logo-container{display:flex;align-items:center;gap:1rem}.app-logo{height:72px;width:auto;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3));transition:transform .2s ease;object-fit:contain}.app-logo:hover{transform:scale(1.05)}@media (max-width: 768px){.app-logo{height:60px}}@media (max-width: 480px){.app-logo{height:48px}}.controls{display:flex;gap:.5rem;align-items:center}.main{flex:1;display:flex;justify-content:center;align-items:center;padding:2rem}.game-container{display:flex;flex-direction:column;align-items:center;gap:1.5rem;width:100%;max-width:500px}.game-board-container{position:relative;border:3px solid var(--border-color);border-radius:16px;overflow:hidden;box-shadow:0 8px 32px #0003;background:linear-gradient(135deg,var(--board-bg) 0%,var(--cell-bg) 100%);transition:all .3s ease;width:450px;height:450px;margin:0 auto}.game-board-container:hover{transform:translateY(-2px);box-shadow:0 12px 40px #00000040}#game-board{display:block;background-color:var(--board-bg);cursor:pointer;transition:all .2s ease;image-rendering:pixelated;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;width:100%;height:100%}#game-board:hover{filter:brightness(1.05)}.board-overlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}.game-info{display:flex;gap:1.5rem;font-size:1.65rem;font-weight:600;flex-wrap:wrap;justify-content:center;background:linear-gradient(135deg,var(--header-bg) 0%,var(--cell-bg) 100%);padding:1rem 1.5rem;border-radius:0;box-shadow:0 2px 10px #0000001a;border:none;border-bottom:1px solid var(--border-color);width:100%;margin:0;position:relative;z-index:10}.game-info>div{display:flex;flex-direction:column;align-items:center;gap:.2rem;padding:.6rem;background:#ffffff1a;border-radius:8px;min-width:80px;flex:1;box-sizing:border-box;overflow:visible;min-height:50px}.game-info span:first-child{font-size:1.125rem;opacity:.95;text-transform:uppercase;letter-spacing:.3px;font-weight:600;white-space:nowrap;max-width:100%}.game-info span:last-child{font-size:2.25rem;font-weight:900;color:var(--primary-color);text-shadow:0 2px 4px rgba(0,0,0,.4);white-space:nowrap;max-width:100%;line-height:1.1;letter-spacing:.5px}.speed-bonus{display:flex;flex-direction:column;align-items:center;gap:.2rem;padding:.4rem .6rem;background:linear-gradient(135deg,#ff6b35,#f7931e);border:1px solid #ff8c42;border-radius:8px;box-shadow:0 2px 8px #ff6b354d;min-width:60px;font-size:.8rem;font-weight:600}.speed-label{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);font-size:.7rem;text-transform:uppercase;letter-spacing:.5px}.speed-value{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5);font-size:1rem;font-weight:900}@keyframes speedPulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.speed-pulse{animation:speedPulse .6s ease-out}@keyframes speedBonusFloat{0%{opacity:1;transform:translate(-50%,-50%) scale(.8)}50%{opacity:1;transform:translate(-50%,-70px) scale(1.1)}to{opacity:0;transform:translate(-50%,-100px) scale(1)}}.speed-bonus-text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;font-weight:900;text-transform:uppercase;letter-spacing:.5px}.hint-controls{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem;border-radius:8px;background:#ffffff1a;border:1px solid rgba(255,255,255,.2)}.btn-hint{background:linear-gradient(135deg,gold,#ffed4e);color:#333;border:2px solid #ffc107;font-weight:600;font-size:.8rem;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0003}.btn-hint:hover:not(:disabled){background:linear-gradient(135deg,#ffed4e,gold);transform:translateY(-1px);box-shadow:0 4px 8px #0000004d}.btn-hint:disabled{opacity:.6;cursor:not-allowed;transform:none}.timer{display:flex;flex-direction:column;align-items:center;gap:.3rem;font-weight:600;color:var(--text-color);transition:all .3s ease;padding:.5rem;border-radius:8px;background:#0003;border:1px solid rgba(255,68,68,.3);min-width:80px}.timer-label{font-size:.7rem;text-transform:uppercase;letter-spacing:1px;color:#f44;text-shadow:0 0 3px #ff4444}.timer-value{font-family:Courier New,Monaco,Lucida Console,monospace;font-weight:700;font-size:1.2rem;padding:.3rem .6rem;background:#000;color:#f44;border-radius:6px;border:2px solid #333;box-shadow:inset 0 0 10px #ff44444d,0 0 20px #f443,0 2px 4px #00000080;text-shadow:0 0 5px #ff4444,0 0 10px #ff4444,0 0 15px #ff4444;letter-spacing:2px;position:relative;overflow:hidden}.timer span:last-child:before{content:"88:88";position:absolute;top:.4rem;left:.8rem;color:#300;text-shadow:none;z-index:-1}.wood-theme .timer span:first-child,[data-theme=wood] .timer span:first-child{color:#fa0;text-shadow:0 0 3px #ffaa00}.wood-theme .timer span:last-child,[data-theme=wood] .timer span:last-child{background:#2a1810;color:#fa0;border-color:#5d3a1a;box-shadow:inset 0 0 10px #ffaa004d,0 0 20px #fa03,0 2px 4px #00000080;text-shadow:0 0 5px #ffaa00,0 0 10px #ffaa00,0 0 15px #ffaa00}.wood-theme .timer span:last-child:before,[data-theme=wood] .timer span:last-child:before{color:#320}.dark-theme .timer span:first-child,[data-theme=dark] .timer span:first-child{color:#0af;text-shadow:0 0 3px #00aaff}.dark-theme .timer span:last-child,[data-theme=dark] .timer span:last-child{background:#0a0a0a;color:#0af;border-color:#222;box-shadow:inset 0 0 10px #00aaff4d,0 0 20px #0af3,0 2px 4px #00000080;text-shadow:0 0 5px #00aaff,0 0 10px #00aaff,0 0 15px #00aaff}.dark-theme .timer span:last-child:before,[data-theme=dark] .timer span:last-child:before{color:#013}.light-theme .timer span:first-child,[data-theme=light] .timer span:first-child{color:#0a0;text-shadow:0 0 3px #00aa00}.light-theme .timer span:last-child,[data-theme=light] .timer span:last-child{background:#1a1a1a;color:#0f0;border-color:#333;box-shadow:inset 0 0 10px #00ff004d,0 0 20px #0f03,0 2px 4px #00000080;text-shadow:0 0 5px #00ff00,0 0 10px #00ff00,0 0 15px #00ff00}.light-theme .timer span:last-child:before,[data-theme=light] .timer span:last-child:before{color:#030}.timer.warning span:last-child{color:#f80!important;text-shadow:0 0 5px #ff8800,0 0 10px #ff8800,0 0 15px #ff8800!important;box-shadow:inset 0 0 10px #ff88004d,0 0 20px #f803,0 2px 4px #00000080!important}.timer.warning span:first-child{color:#f80!important;text-shadow:0 0 3px #ff8800!important}.timer.warning span:last-child:before{color:#320!important}.timer.critical span:last-child{color:red!important;text-shadow:0 0 8px #ff0000,0 0 15px #ff0000,0 0 25px #ff0000!important;box-shadow:inset 0 0 15px #f006,0 0 30px #f006,0 2px 4px #00000080!important;animation:led-pulse .5s infinite alternate!important}.timer.critical span:first-child{color:red!important;text-shadow:0 0 5px #ff0000!important;animation:led-pulse .5s infinite alternate!important}.timer.critical span:last-child:before{color:#300!important}@keyframes led-pulse{0%{text-shadow:0 0 5px #ff0000,0 0 10px #ff0000,0 0 15px #ff0000!important;box-shadow:inset 0 0 10px #ff00004d,0 0 20px #ff00004d,0 2px 4px #00000080!important}to{text-shadow:0 0 10px #ff0000,0 0 20px #ff0000,0 0 30px #ff0000!important;box-shadow:inset 0 0 20px #ff000080,0 0 40px #ff000080,0 2px 4px #00000080!important}}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.difficulty-btn{min-width:80px;text-align:center;font-weight:600;text-transform:capitalize;transition:all .3s ease;position:relative;overflow:hidden}.difficulty-btn.easy{background:linear-gradient(135deg,#4caf50,#66bb6a);border-color:#388e3c;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);box-shadow:0 2px 8px #4caf504d}.difficulty-btn.easy:hover{background:linear-gradient(135deg,#66bb6a,#4caf50);transform:translateY(-1px);box-shadow:0 4px 12px #4caf5066}.difficulty-btn.normal{background:linear-gradient(135deg,#2196f3,#42a5f5);border-color:#1976d2;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);box-shadow:0 2px 8px #2196f34d}.difficulty-btn.normal:hover{background:linear-gradient(135deg,#42a5f5,#2196f3);transform:translateY(-1px);box-shadow:0 4px 12px #2196f366}.difficulty-btn.hard{background:linear-gradient(135deg,#ff9800,#ffb74d);border-color:#f57c00;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);box-shadow:0 2px 8px #ff98004d}.difficulty-btn.hard:hover{background:linear-gradient(135deg,#ffb74d,#ff9800);transform:translateY(-1px);box-shadow:0 4px 12px #ff980066}.difficulty-btn.expert{background:linear-gradient(135deg,#f44336,#ef5350);border-color:#d32f2f;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);box-shadow:0 2px 8px #f443364d;animation:expert-pulse 2s infinite}.difficulty-btn.expert:hover{background:linear-gradient(135deg,#ef5350,#f44336);transform:translateY(-1px);box-shadow:0 4px 12px #f4433666}@keyframes expert-pulse{0%,to{box-shadow:0 2px 8px #f443364d}50%{box-shadow:0 2px 12px #f4433680}}.new-game-btn{min-width:80px;text-align:center;font-weight:600}#settings-toggle{min-width:50px;text-align:center;font-weight:600;font-size:1.2rem;padding:.5rem}.footer{background-color:var(--footer-bg);padding:1rem 2rem;text-align:center;font-size:.9rem;color:var(--text-muted)}.btn{padding:.75rem 1.5rem;border:none;border-radius:12px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;text-transform:uppercase;letter-spacing:.5px}.btn:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn:hover:before{left:100%}.btn-primary{background:linear-gradient(135deg,var(--primary-color) 0%,var(--primary-hover) 100%);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);box-shadow:0 4px 15px #007bff4d}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 25px #007bff66}.btn-secondary{background:linear-gradient(135deg,var(--secondary-color) 0%,var(--secondary-hover) 100%);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);border:1px solid var(--border-color);box-shadow:0 4px 15px #0000001a}.btn-secondary:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0003}.block-palette{background:linear-gradient(135deg,var(--header-bg) 0%,var(--cell-bg) 100%);padding:2rem;border-radius:20px;box-shadow:0 8px 32px #00000026;width:100%;max-width:700px;min-height:120px;height:120px;border:1px solid var(--border-color);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;flex-direction:column;justify-content:center}.block-palette.pre-game-over{filter:grayscale(90%) brightness(.6) opacity(.85);transition:filter .25s ease}.block-palette h3{margin-bottom:1.5rem;text-align:center;color:var(--text-color);font-size:1.3rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;text-shadow:0 2px 4px rgba(0,0,0,.1)}.blocks-container{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;align-items:center;height:100%;overflow:hidden}.rotate-selected-btn{background:linear-gradient(135deg,var(--primary-color) 0%,var(--primary-hover) 100%);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);border:none;border-radius:50%;width:50px;height:50px;font-size:1.5rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 4px 15px #007bff4d;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:absolute;right:1rem;top:50%;transform:translateY(-50%);z-index:10}.rotate-selected-btn:hover:not(.disabled){transform:translateY(-50%) translateY(-2px) scale(1.1);box-shadow:0 8px 25px #007bff66}.rotate-selected-btn:active:not(.disabled){transform:translateY(-50%) scale(.95)}.rotate-selected-btn.disabled{background:linear-gradient(135deg,var(--secondary-color) 0%,var(--secondary-hover) 100%);color:var(--text-muted);cursor:not-allowed;opacity:.5;box-shadow:0 2px 8px #0000001a}.rotate-selected-btn.disabled:hover{transform:none;box-shadow:0 2px 8px #0000001a}.block-item{background:transparent;border:2px solid transparent;border-radius:8px;padding:.5rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-width:60px;text-align:center;position:relative;overflow:visible;display:flex;justify-content:center;align-items:center;touch-action:none;-webkit-user-select:none;user-select:none}.block-item.unplaceable{filter:grayscale(90%) brightness(.5) opacity(.4);cursor:not-allowed;pointer-events:none;position:relative}.block-item.unplaceable:after{content:"✕";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#f44;font-size:1.5rem;font-weight:700;text-shadow:0 0 3px rgba(0,0,0,.8);z-index:10;pointer-events:none}.block-item.placeable{filter:none;cursor:pointer;pointer-events:auto}.block-item.last-playable{animation:lastPlayablePulse .6s ease-in-out infinite alternate;outline:2px solid var(--primary-color);outline-offset:2px}@keyframes lastPlayablePulse{0%{transform:scale(1.05);box-shadow:0 0 10px #007bff66}to{transform:scale(1.12);box-shadow:0 0 18px #007bff99}}.block-item.dragging{filter:saturate(40%) brightness(.8);opacity:.8;transform:scale(1.1);border:2px solid var(--primary-color);box-shadow:0 4px 15px #007bff66;transition:filter .1s ease,opacity .1s ease,transform .1s ease,border .1s ease,box-shadow .1s ease}.block-item.dragging .block-preview canvas{filter:grayscale(40%)}@keyframes pulse{0%{box-shadow:0 12px 35px #007bff66}50%{box-shadow:0 12px 35px #007bff99}to{box-shadow:0 12px 35px #007bff66}}.block-item.petrified{filter:grayscale(100%) brightness(.6);position:relative;cursor:not-allowed;pointer-events:none}.block-item.petrified:before{content:"❄";position:absolute;top:5px;right:5px;font-size:1.2rem;text-shadow:0 0 3px rgba(150,200,255,.8);z-index:10;animation:frozenPulse 2s ease-in-out infinite}@keyframes frozenPulse{0%,to{opacity:.7;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}}.block-item.warning-7s{animation:warning7sFlash 1s ease-in-out infinite}@keyframes warning7sFlash{0%,to{opacity:1}50%{opacity:.7}}.block-item.warning-3s{animation:warning3sFlash .3s ease-in-out infinite;border-color:#ff6b35!important}@keyframes warning3sFlash{0%,to{opacity:1;box-shadow:0 0 #ff6b3500}50%{opacity:.6;box-shadow:0 0 15px #ff6b35cc}}.block-preview{display:flex;justify-content:center;align-items:center;margin:0;min-height:40px;width:auto;height:auto;flex-shrink:0}.block-preview canvas{border:none;border-radius:4px;display:block;max-width:100%;max-height:100%;object-fit:contain}.game-container{display:flex;flex-direction:column;align-items:center;gap:1.5rem}.game-area{display:flex;flex-direction:column;gap:2rem;align-items:center;width:100%}.game-board-container{flex-shrink:0}.install-btn{animation:pulse 2s infinite;background:linear-gradient(135deg,#28a745,#20c997)!important;color:#fff!important;border:none!important;box-shadow:0 2px 8px #28a74540!important}.install-btn:hover{background:linear-gradient(135deg,#218838,#1ea085)!important;transform:translateY(-2px);box-shadow:0 4px 12px #28a74559!important}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.update-notification{animation:slideIn .3s ease-out}@keyframes slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.offline-indicator{transition:transform .3s ease}@media (max-width: 768px){.header{padding:.825rem 1rem;flex-direction:row;justify-content:space-between;align-items:center;gap:.5rem}.utility-bar{grid-template-columns:1fr 1fr 1fr 1fr;padding:.2rem .6rem;gap:.3rem;min-height:1.5rem}.utility-bar.has-content{padding:.4rem .6rem;min-height:2.5rem}.utility-slot{min-height:2rem}.personal-bests{font-size:.75rem;gap:.5rem;padding:.3rem}.timer{min-width:60px;padding:.3rem}.timer-value{font-size:1rem;padding:.2rem .4rem}.speed-bonus{min-width:50px;padding:.3rem .4rem}.hint-controls{padding:.3rem}.logo-container{gap:.75rem}.header h1{font-size:1.5rem}.controls{gap:.25rem;flex-wrap:wrap;align-items:center}.main{padding:1rem .5rem .5rem;display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 180px)}.game-container{width:100%;max-width:400px;display:flex;flex-direction:column;align-items:center;gap:1.5rem}.game-area{flex-direction:column;align-items:center;gap:1.5rem}.game-board-container{width:90vw;height:90vw;max-width:90vw;max-height:90vw;margin:0 auto;order:1}#game-board{width:100%;height:100%;max-width:90vw;max-height:90vw}.footer{display:none}.game-info{flex-direction:row;gap:.5rem;padding:.4rem .6rem;flex-wrap:nowrap;background:linear-gradient(135deg,var(--header-bg) 0%,var(--cell-bg) 100%);border-radius:0;border:none;border-bottom:1px solid var(--border-color);min-height:45px;box-shadow:0 2px 8px #0000001a}.game-info>div{min-width:60px;padding:.4rem;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;box-sizing:border-box;overflow:visible;min-height:35px}.game-info span:first-child{font-size:.825rem;line-height:1;margin-bottom:.1rem;font-weight:600;white-space:nowrap;max-width:100%;opacity:.95}.game-info span:last-child{font-size:1.65rem;line-height:1.1;font-weight:900;text-shadow:0 2px 4px rgba(0,0,0,.4);white-space:nowrap;max-width:100%;letter-spacing:.3px}.blocks-container{display:grid;grid-template-columns:repeat(3,1fr);gap:.6rem;width:100%;max-width:450px;padding:.5rem}.block-item{min-width:0;padding:.4rem;font-size:.75rem;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;text-align:center;min-width:70px;min-height:70px;width:auto;height:auto}.block-item .block-shape{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex:1;margin:0}.block-palette{padding:.5rem;margin:0;width:100%;max-width:450px;min-height:115px;height:115px;order:2}.block-palette h3{display:none}.rotate-selected-btn{position:static;transform:none;margin:.5rem auto 0;width:40px;height:40px;font-size:1.2rem;display:block}.rotate-selected-btn:hover:not(.disabled){transform:translateY(-2px) scale(1.1)}.rotate-selected-btn:active:not(.disabled){transform:scale(.95)}.btn{padding:.4rem .6rem;font-size:.7rem;min-width:auto;display:flex;align-items:center;justify-content:center;gap:.25rem}}@media (max-height: 500px) and (orientation: landscape){.main{padding:.25rem;min-height:auto}.game-container{flex-direction:row;gap:.5rem;max-width:100%;align-items:flex-start}.game-info{order:0;min-height:30px;max-height:30px;padding:.2rem .4rem;flex-shrink:0}.game-area{flex-direction:column;gap:.5rem;flex:1}.game-board-container{width:50vw;height:50vw;max-width:50vw;max-height:50vw;order:1}.block-palette{order:2;min-height:60px;height:60px;padding:.3rem;flex-shrink:0}.game-info>div{min-width:35px;padding:.1rem .15rem}.game-info span:first-child{font-size:.675rem}.game-info span:last-child{font-size:.9rem}}@media (max-width: 480px){.header{padding:.55rem .75rem}.utility-bar{padding:.15rem .5rem;gap:.2rem;min-height:1.2rem}.utility-bar.has-content{padding:.3rem .5rem;min-height:2rem}.utility-slot{min-height:1.5rem}.personal-bests{font-size:.7rem;gap:.3rem;padding:.2rem}.timer{min-width:50px;padding:.2rem}.timer-value{font-size:.9rem;padding:.15rem .3rem}.speed-bonus{min-width:45px;padding:.2rem .3rem;font-size:.7rem}.hint-controls{padding:.2rem}.btn-hint{font-size:.7rem;padding:.3rem .6rem}.logo-container{gap:.5rem}.controls{gap:.2rem}.btn{padding:.3rem .4rem;font-size:.65rem;display:flex;align-items:center;justify-content:center;gap:.2rem}.main{padding:1rem .25rem .25rem;min-height:calc(100vh - 160px)}.game-container{max-width:350px;gap:1rem}.game-board-container{width:90vw;height:90vw;max-width:90vw;max-height:90vw;margin:0 auto}#game-board{width:100%;height:100%;max-width:90vw;max-height:90vw}.game-area{gap:1rem}.game-info{flex-direction:row;gap:.3rem;padding:.3rem .4rem;min-height:38px;background:linear-gradient(135deg,var(--header-bg) 0%,var(--cell-bg) 100%);border-radius:0;border:none;border-bottom:1px solid var(--border-color);box-shadow:0 2px 8px #0000001a}.game-info>div{min-width:45px;padding:.2rem .25rem;box-sizing:border-box;overflow:visible;min-height:30px}.game-info span:first-child{font-size:.675rem;line-height:1;font-weight:600;white-space:nowrap;max-width:100%;opacity:.95}.game-info span:last-child{font-size:1.2rem;line-height:1.1;font-weight:900;text-shadow:0 2px 3px rgba(0,0,0,.4);white-space:nowrap;max-width:100%;letter-spacing:.2px}.blocks-container{display:grid;grid-template-columns:repeat(3,1fr);gap:.3rem;max-width:450px;padding:.4rem}.block-item{padding:.3rem;font-size:.7rem;width:auto;max-width:none;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;min-width:60px;min-height:60px;height:auto}.block-palette{padding:.4rem;max-width:450px;min-height:105px;height:105px}.rotate-selected-btn{width:35px;height:35px;font-size:1rem;margin:.3rem auto 0}.settings-section{margin-bottom:1.5rem;padding-bottom:1rem}.theme-options{justify-content:center;gap:.75rem}.theme-option{min-width:70px;padding:.75rem}.theme-preview{width:32px;height:32px}.settings-section .difficulty-options{grid-template-columns:1fr;gap:.75rem}.settings-section .difficulty-option{padding:.75rem}.settings-section .difficulty-header h4{font-size:1rem}.settings-section .difficulty-option p{font-size:.85rem}#install-button-container .install-btn{max-width:100%;font-size:.9rem;padding:.75rem 1rem}}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content{background:var(--card-bg);border-radius:15px;box-shadow:0 20px 40px #0000004d;max-width:500px;width:90%;max-height:80vh;overflow-y:auto;border:1px solid var(--border-color)}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--border-color);background:linear-gradient(135deg,var(--header-bg) 0%,var(--primary-color) 100%);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);border-radius:15px 15px 0 0}.modal-header h2{margin:0;font-size:1.5rem;font-weight:600}.close-btn{background:none;border:none;font-size:2rem;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color .2s}.close-btn:hover{background:#fff3}.modal-body{padding:1.5rem}.score-item{display:flex;align-items:center;padding:.75rem;margin-bottom:.5rem;background:var(--bg-color);border-radius:8px;border:1px solid var(--border-color);transition:transform .2s,box-shadow .2s}.score-item:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.score-item:first-child{background:linear-gradient(135deg,gold,#ffed4e);color:#333;font-weight:600}.score-item:nth-child(2){background:linear-gradient(135deg,silver,#e8e8e8);color:#333}.score-item:nth-child(3){background:linear-gradient(135deg,#cd7f32,#daa520);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.rank{font-weight:700;font-size:1.1rem;margin-right:1rem;min-width:30px}.score-value{font-size:1.2rem;font-weight:600;margin-right:1rem;min-width:80px}.score-details{font-size:.9rem;color:var(--text-muted);flex:1}.statistics{margin-top:2rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}.statistics h3{margin-bottom:1rem;color:var(--text-color);font-size:1.2rem}.stat-item{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid var(--border-color)}.stat-item:last-child{border-bottom:none}.stat-label{font-weight:500;color:var(--text-color)}.stat-value{font-weight:600;color:var(--primary-color);font-size:1.1rem}@media (max-width: 768px){.modal{padding:.5rem}.modal-content{width:100%;max-width:100%;margin:0;max-height:90vh;overflow-y:auto}.modal-header{padding:1rem;position:sticky;top:0;background:var(--card-bg);border-bottom:1px solid var(--border-color);z-index:10}.modal-body{padding:1rem}.score-item{flex-direction:column;align-items:flex-start;gap:.5rem}.rank,.score-value{margin-right:0;min-width:auto}}@media (max-width: 480px){.modal{padding:.25rem}.modal-content{max-height:95vh}.modal-header{padding:.75rem}.modal-header h2{font-size:1.3rem}.modal-body{padding:.75rem}}.difficulty-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:2rem}.difficulty-option{border:2px solid var(--border-color);border-radius:12px;padding:1.5rem;cursor:pointer;transition:all .3s ease;background:var(--card-bg);color:var(--text-color);box-shadow:0 2px 8px #0000001a}.difficulty-option:hover{transform:translateY(-2px);box-shadow:0 8px 25px #00000026;border-color:var(--primary-color)}.difficulty-option.selected{border-color:var(--primary-color);background:var(--primary-color);color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.5)!important}[data-theme=light] .difficulty-option.selected,body.light-theme .difficulty-option.selected,html.light-theme .difficulty-option.selected{color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.7)!important}.difficulty-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.difficulty-header h3{margin:0;font-size:1.3rem;font-weight:600}.difficulty-badge{padding:.25rem .75rem;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.difficulty-badge.easy{background:#28a745;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.difficulty-badge.normal{background:#007bff;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.difficulty-badge.hard{background:#ffc107;color:#333}.difficulty-badge.expert{background:#dc3545;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.difficulty-option p{margin:.5rem 0 1rem;font-style:italic;opacity:.8}.difficulty-option ul{margin:0;padding-left:1.2rem;list-style:none}.difficulty-option li{position:relative;margin-bottom:.3rem;font-size:.9rem}.difficulty-option li:before{content:"✓";position:absolute;left:-1.2rem;color:var(--primary-color);font-weight:700}.difficulty-option.selected li:before{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.difficulty-option.selected h4,.difficulty-option.selected p{color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.7)!important}.difficulty-settings{border-top:1px solid var(--border-color);padding-top:1.5rem}.difficulty-settings h3{margin-bottom:1rem;color:var(--text-color)}.setting-item{margin-bottom:1.5rem;padding:1rem;background:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;transition:all .2s ease}.setting-item:hover{border-color:var(--primary-color);box-shadow:0 2px 8px #0000001a}.setting-item label{display:flex;align-items:center;cursor:pointer;margin-bottom:.5rem;font-weight:500;color:var(--text-color)}.setting-description{margin:0;margin-left:2rem;color:var(--text-muted);font-size:.9rem;line-height:1.4;font-style:italic}.settings-section{margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border-color)}.settings-section:last-child{border-bottom:none;margin-bottom:0}.settings-section h3{margin-bottom:1rem;color:var(--text-color);font-size:1.2rem;font-weight:600}.theme-options{display:flex;gap:1rem;flex-wrap:wrap}.theme-option{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:1rem;border:2px solid var(--border-color);border-radius:12px;background:var(--card-bg);cursor:pointer;transition:all .3s ease;min-width:80px}.theme-option:hover{border-color:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.theme-option.selected{border-color:var(--primary-color);background:var(--primary-color);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5)}[data-theme=light] .theme-option.selected,body.light-theme .theme-option.selected,html.light-theme .theme-option.selected{color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.7)!important}.theme-preview{width:40px;height:40px;border-radius:8px;border:2px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.wood-preview{background:linear-gradient(135deg,#8d6e63,#a1887f);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.light-preview{background:linear-gradient(135deg,#f5f5f5,#e0e0e0);color:#333;text-shadow:0 1px 2px rgba(255,255,255,.5)}.dark-preview{background:linear-gradient(135deg,#424242,#616161);color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.settings-section .difficulty-options{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.settings-section .difficulty-option{padding:1rem;border:2px solid var(--border-color);border-radius:12px;background:var(--card-bg);cursor:pointer;transition:all .3s ease;text-align:left}.settings-section .difficulty-option:hover{border-color:var(--primary-color);transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.settings-section .difficulty-option.selected{border-color:var(--primary-color);background:var(--primary-color);color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.5)!important}[data-theme=light] .settings-section .difficulty-option.selected,body.light-theme .settings-section .difficulty-option.selected,html.light-theme .settings-section .difficulty-option.selected{color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.7)!important}.settings-section .difficulty-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.settings-section .difficulty-header h4{margin:0;font-size:1.1rem;font-weight:600}.settings-section .difficulty-option p{margin:0;font-size:.9rem;opacity:.8}.settings-section .difficulty-option.selected p{opacity:1;color:#fff!important}.settings-section .difficulty-option.selected h4{color:#fff!important;text-shadow:0 1px 2px rgba(0,0,0,.7)!important}.setting-item input[type=checkbox],.setting-item input[type=radio]{margin-right:.75rem;width:18px;height:18px;accent-color:var(--primary-color)}.combo-display-settings{background:var(--card-bg);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000001a}.combo-display-settings h3{margin-bottom:1rem;color:var(--text-color);font-size:1.1rem;font-weight:600;border-bottom:1px solid var(--border-color);padding-bottom:.5rem}.combo-options{display:flex;gap:1rem;flex-wrap:wrap}.combo-option{display:flex;align-items:center;cursor:pointer;padding:.75rem 1rem;border:2px solid var(--border-color);border-radius:8px;background:var(--bg-color);transition:all .3s ease;flex:1;min-width:120px;justify-content:center}.combo-option:hover{border-color:var(--primary-color);background:var(--cell-hover);transform:translateY(-1px);box-shadow:0 2px 8px #0000001a}.combo-option input[type=radio]{display:none}.combo-option:has(input:checked){border-color:var(--primary-color);background:linear-gradient(135deg,var(--primary-color) 0%,var(--accent-color) 100%);color:#fff;box-shadow:0 4px 12px #0003}.combo-option:has(input:checked) .combo-label{color:#fff;font-weight:600}.combo-label{font-weight:500;color:var(--text-color);transition:color .3s ease;display:block;margin-bottom:.25rem}.combo-description{font-size:.8rem;color:var(--text-muted);font-style:italic;display:block;line-height:1.3}@media (max-width: 768px){.combo-options{flex-direction:column}.combo-option{min-width:auto}.setting-description{margin-left:1.5rem;font-size:.85rem}.setting-item{padding:.75rem;margin-bottom:1rem}}#install-button-container{margin-top:1rem;text-align:center}#install-button-container .install-btn{width:100%;max-width:200px;margin:0 auto;display:none;background:linear-gradient(135deg,#28a745,#20c997)!important;color:#fff!important;border:none!important;box-shadow:0 2px 8px #28a74540!important}#install-button-container .install-btn:hover{background:linear-gradient(135deg,#218838,#1ea085)!important;transform:translateY(-2px);box-shadow:0 4px 12px #28a74559!important}#install-button-container .install-btn.show{display:inline-block}.build-info{font-size:.85rem;color:var(--text-muted, #666);margin-top:.25rem;font-family:Courier New,monospace;opacity:.8}@media (max-width: 768px){.difficulty-options{grid-template-columns:1fr;gap:.75rem;margin-bottom:1.5rem}.difficulty-option{padding:1rem;margin-bottom:.5rem}.difficulty-header{flex-direction:column;align-items:flex-start;gap:.5rem;margin-bottom:.75rem}.difficulty-header h3{font-size:1.2rem}.difficulty-badge{align-self:flex-end;font-size:.7rem;padding:.2rem .6rem}.difficulty-option p{font-size:.9rem;margin:.4rem 0 .8rem}.difficulty-option li{font-size:.85rem;margin-bottom:.25rem}}@media (max-width: 480px){.difficulty-options{gap:.5rem;margin-bottom:1rem}.difficulty-option{padding:.75rem}.difficulty-header h3{font-size:1.1rem}.difficulty-option p{font-size:.85rem}.difficulty-option li{font-size:.8rem}}.drag-block-element{position:fixed;pointer-events:none;z-index:1000;opacity:.8;transform:translate(-50%,-50%);transition:none;filter:drop-shadow(0 4px 8px rgba(0,0,0,.3))}.drag-block-element canvas{border-radius:4px;border:2px solid rgba(255,255,255,.3)}@media (max-width: 768px){.block-item{touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;min-height:44px;min-width:44px}button,.nav-item,.theme-option,.difficulty-option{min-height:44px;min-width:44px;touch-action:manipulation}.block-item:active{transform:scale(.95);transition:transform .1s ease}.difficulty-btn{min-width:70px;font-size:.8rem}.difficulty-btn.easy{box-shadow:0 1px 4px #4caf504d}.difficulty-btn.normal{box-shadow:0 1px 4px #2196f34d}.difficulty-btn.hard{box-shadow:0 1px 4px #ff98004d}.difficulty-btn.expert{box-shadow:0 1px 4px #f443364d;animation:expert-pulse-mobile 2s infinite}@keyframes expert-pulse-mobile{0%,to{box-shadow:0 1px 4px #f443364d}50%{box-shadow:0 1px 6px #f4433680}}.new-game-btn{min-width:70px;font-size:.8rem}#settings-toggle{min-width:40px;font-size:1rem;padding:.4rem}}@media (max-width: 768px){.difficulty-btn,.new-game-btn{min-width:75px;font-size:.85rem}#settings-toggle{min-width:45px;font-size:1.1rem;padding:.45rem}}.share-button{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:50%;transition:background-color .2s ease;display:inline-flex;align-items:center;justify-content:center;margin-left:.5rem}.share-button:hover{background-color:#ffffff1a}.share-icon{width:20px;height:20px;display:inline-block;position:relative}.share-icon.material{background:currentColor;mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z'/%3E%3C/svg%3E") no-repeat center;-webkit-mask-size:contain;mask-size:contain}.share-icon.ios{background:currentColor;mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M3 3h18v18H3V3zm2 2v14h14V5H5zm2 2h10v2H7V7zm0 4h10v2H7v-2zm0 4h7v2H7v-2zm9-4l2-2 2 2v8h-4v-8z'/%3E%3C/svg%3E") no-repeat center;-webkit-mask-size:contain;mask-size:contain}.share-icon:not(.material):not(.ios){background:currentColor;mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z'/%3E%3C/svg%3E") no-repeat center;-webkit-mask-size:contain;mask-size:contain}.pwa-install-item{margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border-color)}.reset-stats-item{margin-top:1.5rem;padding-top:1.5rem;border-top:2px solid #dc3545;background:linear-gradient(135deg,#dc35450d,#c023300d);border-radius:8px;padding:1.5rem;margin-left:-1rem;margin-right:-1rem}.pwa-install-button{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem;width:100%;box-shadow:0 2px 8px #28a74540}.pwa-install-button:hover{background:linear-gradient(135deg,#218838,#1ea085);transform:translateY(-2px);box-shadow:0 4px 12px #28a74559}.pwa-install-button:active{transform:translateY(0)}.pwa-install-button.installed{background:linear-gradient(135deg,#28a745,#20c997)}.pwa-install-button.installed:hover{background:linear-gradient(135deg,#218838,#1ea085)}.install-text{font-weight:600}.install-status{font-weight:700;font-size:.9rem}.pwa-install-button.installed .install-text{display:none}.pwa-install-button.installed .install-status:before{content:"✓ ";margin-right:.25rem}.reset-stats-button{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff;border:2px solid #dc3545;padding:.75rem 1.5rem;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem;width:100%;box-shadow:0 2px 6px #0000001a;text-shadow:0 1px 2px rgba(0,0,0,.3);position:relative;overflow:hidden}.reset-stats-button:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.reset-stats-button:hover:before{left:100%}.reset-stats-button:hover{background:linear-gradient(135deg,#c82333,#bd2130);border-color:#c82333;transform:translateY(-2px);box-shadow:0 3px 8px #00000026}.reset-stats-button:active{transform:translateY(0);box-shadow:0 2px 8px #0003}.reset-text{font-weight:600}[data-theme=light] .reset-stats-item,body.light-theme .reset-stats-item{background:linear-gradient(135deg,#dc354514,#c0233014);border-top-color:#dc3545}[data-theme=dark] .reset-stats-item,body.dark-theme .reset-stats-item{background:linear-gradient(135deg,#dc35451a,#c023301a);border-top-color:#dc3545}[data-theme=wood] .reset-stats-item,body.wood-theme .reset-stats-item{background:linear-gradient(135deg,#dc354514,#c0233014);border-top-color:#dc3545}.copyright-notice{position:static;bottom:auto;right:auto;z-index:1000;pointer-events:none;margin:2rem 0 0;text-align:center;width:100%}.copyright-notice p{margin:0;font-size:.75rem;color:#fff9;text-shadow:0 1px 2px rgba(0,0,0,.3);font-weight:400;letter-spacing:.5px}.copyright-notice p{background:#0003;padding:2px 6px;border-radius:4px;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.copyright-notice a{color:#fffc;text-decoration:none;pointer-events:auto;transition:color .2s ease}.copyright-notice a:hover{color:#fff;text-decoration:underline}.point-breakdown{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#000000e6;color:#fff;padding:1rem 1.5rem;border-radius:12px;font-size:1.1rem;font-weight:600;text-align:center;box-shadow:0 8px 32px #0000004d;border:2px solid var(--primary-color);z-index:1000;pointer-events:none;line-height:1.4;min-width:200px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.point-breakdown:before{content:"";position:absolute;top:-8px;left:50%;transform:translate(-50%);width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:8px solid var(--primary-color)}.floating-score{position:absolute;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;font-weight:900;text-align:center;-webkit-user-select:none;user-select:none;animation:floatUp 1.5s ease-out forwards}@keyframes floatUp{0%{transform:translateY(0) scale(1);opacity:1}50%{transform:translateY(-30px) scale(1.1);opacity:.8}to{transform:translateY(-60px) scale(1.2);opacity:0}}.block-item.piece-struggling{animation:pieceStruggle .8s ease-in-out infinite;filter:brightness(1.2) saturate(1.3)}.block-item.piece-timed-out{filter:grayscale(100%) brightness(.3) opacity(.5);cursor:not-allowed;pointer-events:none;position:relative;animation:none}.block-item.piece-timed-out:after{content:"🔒";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2rem;opacity:.8;text-shadow:0 0 5px rgba(0,0,0,.8);z-index:10;pointer-events:none}@keyframes pieceStruggle{0%{transform:rotate(0) scale(1)}25%{transform:rotate(-3deg) scale(1.05)}50%{transform:rotate(0) scale(1)}75%{transform:rotate(3deg) scale(1.05)}to{transform:rotate(0) scale(1)}}.floating-piece-timeout{position:fixed;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;font-weight:900;text-align:center;-webkit-user-select:none;user-select:none;color:#f44;font-size:1.5rem;text-shadow:0 0 10px #ff4444,0 0 20px #ff4444;pointer-events:none;z-index:1001;animation:floatUpLong 3s ease-out forwards;white-space:nowrap;padding:.5rem 1rem;background:#000000b3;border-radius:8px;border:2px solid #ff4444;box-shadow:0 0 20px #ff444480}@keyframes floatUpLong{0%{transform:translate(-50%,-50%) scale(.8);opacity:0}10%{transform:translate(-50%,-50%) scale(1.2);opacity:1}40%{transform:translate(-50%,-70px) scale(1.1);opacity:1}to{transform:translate(-50%,-120px) scale(1);opacity:0}}
