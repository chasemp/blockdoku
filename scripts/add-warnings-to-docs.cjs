#!/usr/bin/env node

/**
 * Add "DO NOT EDIT" warnings to the top of all HTML files in /docs
 */

const fs = require('fs');
const path = require('path');

const WARNING =  `<!--
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                             ║
║  ⚠️  AUTO-GENERATED FILE - DO NOT EDIT MANUALLY! ⚠️                                                         ║
║                                                                                                             ║
║  This file was automatically generated by Vite from source files in /src                                   ║
║  Any changes made directly to this file will be OVERWRITTEN on the next build.                             ║
║                                                                                                             ║
║  To make changes:                                                                                           ║
║  1. Edit the corresponding source file in /src                                                              ║
║  2. Run: npm run build                                                                                      ║
║  3. Test: npm run preview                                                                                   ║
║  4. Commit both /src and /docs changes                                                                      ║
║                                                                                                             ║
║  See DEPLOYMENT.md for complete workflow documentation.                                                     ║
║                                                                                                             ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════╝
-->
`;

const docsDir = path.join(__dirname, '..', 'docs');
const htmlFiles = fs.readdirSync(docsDir).filter(file => file.endsWith('.html'));

console.log(`Adding warnings to ${htmlFiles.length} HTML files in /docs...`);

htmlFiles.forEach(file => {
    const filePath = path.join(docsDir, file);
    const content = fs.readFileSync(filePath, 'utf8');
    
    // Check if warning already exists
    if (content.includes('AUTO-GENERATED FILE')) {
        console.log(`  ✓ ${file} already has warning`);
        return;
    }
    
    // Add warning after DOCTYPE
    const newContent = content.replace(/(<\!DOCTYPE html>)/i, `$1\n${WARNING}`);
    
    fs.writeFileSync(filePath, newContent, 'utf8');
    console.log(`  ✓ Added warning to ${file}`);
});

console.log('\nDone! All /docs HTML files now have DO NOT EDIT warnings.');

