class c{constructor(e=null){this.currentDifficulty="normal",this.difficultySettings=this.initializeDifficultySettings(),this.gameRules=this.initializeGameRules(),this.game=e}initializeDifficultySettings(){return{easy:{name:"Easy",shortDescription:"Larger blocks, slower pace",description:"Larger blocks, slower pace, hints available",blockSizeRange:[2,4],allowedShapes:["square2x2","square3x3","l2x2","line2","line3"],scoreMultiplier:1.5,timeLimit:null,hintsEnabled:!0,blockGenerationDelay:2e3,visualHints:!0},normal:{name:"Normal",shortDescription:"Standard block variety, moderate pace",description:"Standard block variety, moderate pace",blockSizeRange:[1,5],allowedShapes:"all",scoreMultiplier:1,timeLimit:null,hintsEnabled:!1,blockGenerationDelay:1500,visualHints:!1},hard:{name:"Hard",shortDescription:"Smaller blocks, faster pace",description:"Smaller blocks, faster pace, no hints",blockSizeRange:[1,3],allowedShapes:["single","line2","line3","l2x2","t3x2","z3x2"],scoreMultiplier:.8,timeLimit:null,hintsEnabled:!1,blockGenerationDelay:1e3,visualHints:!1},expert:{name:"Expert",shortDescription:"Complex shapes, time pressure",description:"Complex shapes, time pressure, limited moves",blockSizeRange:[1,4],allowedShapes:"all",scoreMultiplier:.5,timeLimit:300,hintsEnabled:!1,blockGenerationDelay:800,visualHints:!1,moveLimit:50}}}getDetailedDescription(e,s){const l=this.difficultySettings[e];if(!l)return"";const n=l.shortDescription;if(!s||!s.difficultyDefaults)return n;const i=s.difficultyDefaults[e];if(!i)return n;const t=[];if(i.enableHints&&t.push("Enable Hints"),i.showPoints&&t.push("Show Block Points"),i.enableTimer&&t.push("Enable Timer"),i.enablePetrification&&t.push("Enable Petrification"),i.enableDeadPixels&&t.push("Enable Dead Pixels"),i.showPersonalBests&&t.push("Enable Personal Best"),i.showSpeedTimer&&t.push("Show Speed Timer"),i.enablePrizeRecognition&&t.push("Enable Prize Recognition"),i.pieceTimeoutEnabled&&t.push("Enable Piece Timeout"),i.speedMode&&i.speedMode!=="ignored"){const r=i.speedMode.charAt(0).toUpperCase()+i.speedMode.slice(1);t.push(`Speed Tracking: ${r}`)}return t.length>0?`${n}
Defaults: ${t.join(", ")}`:`${n}
Defaults: None`}getComparisonBubbles(e,s){if(!s||!s.difficultyDefaults)return[];const l=s.getSettingsForDifficulty("normal"),n=s.getSettingsForDifficulty(e);if(!l||!n||e==="normal")return[];const i=[],t=[{key:"enableHints",label:"Hints",emoji:"💡"},{key:"showPoints",label:"Points",emoji:"🔢"},{key:"enableTimer",label:"Timer",emoji:"⏱️"},{key:"showPersonalBests",label:"Best",emoji:"🏆"},{key:"showSpeedTimer",label:"Speed",emoji:"⚡"},{key:"enablePrizeRecognition",label:"Prizes",emoji:"🎉"},{key:"pieceTimeoutEnabled",label:"Timeout",emoji:"⏰"}];if(n.speedMode!==l.speedMode){const r=n.speedMode==="bonus"?"Bonus":n.speedMode==="punishment"?"Punish":"Speed";i.push({type:n.speedMode==="ignored"?"disabled":"enabled",label:r,emoji:"🏃"})}return t.forEach(r=>{const a=l[r.key],o=n[r.key];a!==o&&i.push({type:o?"enabled":"disabled",label:r.label,emoji:r.emoji})}),i}initializeGameRules(){return{basePoints:{single:10,line:100,combo:50},levelThresholds:{easy:[100,300,600,1e3,1500,2200,3e3,4e3,5200,6600],normal:[200,500,900,1400,2e3,2700,3500,4400,5400,6500],hard:[150,400,700,1100,1600,2200,2900,3700,4600,5600],expert:[100,250,450,700,1e3,1350,1750,2200,2700,3250]},comboThresholds:{easy:2,normal:3,hard:4,expert:5}}}setDifficulty(e){return this.difficultySettings[e]?(this.currentDifficulty=e,!0):!1}getCurrentDifficulty(){return this.currentDifficulty}getDifficultySettings(){return this.difficultySettings[this.currentDifficulty]}getScoreMultiplier(){return this.difficultySettings[this.currentDifficulty].scoreMultiplier}getTimeLimit(){return this.difficultySettings[this.currentDifficulty].timeLimit}isHintsEnabled(){return this.game&&this.game.enableHints?!0:this.difficultySettings[this.currentDifficulty].hintsEnabled}getBlockGenerationDelay(){return this.difficultySettings[this.currentDifficulty].blockGenerationDelay}hasVisualHints(){return this.difficultySettings[this.currentDifficulty].visualHints}getMoveLimit(){return this.difficultySettings[this.currentDifficulty].moveLimit||null}getAllowedShapes(){return this.difficultySettings[this.currentDifficulty].allowedShapes}getBlockSizeRange(){return this.difficultySettings[this.currentDifficulty].blockSizeRange}getLevelThresholds(){return this.gameRules.levelThresholds[this.currentDifficulty]}getComboThreshold(){return this.gameRules.comboThresholds[this.currentDifficulty]}calculateScore(e,s=1){const l=this.getScoreMultiplier();return Math.floor(e*l)}shouldGenerateNewBlocks(e,s){const l=this.getLevelThresholds();return s<=l.length&&e>=l[s-1]}getDifficultyInfo(){const e=this.getDifficultySettings();return{name:e.name,description:e.description,features:{hints:e.hintsEnabled,timer:e.timeLimit!==null,moveLimit:e.moveLimit!==null}}}getAvailableDifficulties(){return Object.keys(this.difficultySettings).map(e=>({key:e,...this.difficultySettings[e]}))}reset(){this.currentDifficulty="normal"}}export{c as DifficultyManager};
