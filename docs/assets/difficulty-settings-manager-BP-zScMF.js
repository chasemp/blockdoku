const O="modulepreload",g=function(u,e){return new URL(u,e).href},m={},p=function(e,s,a){let r=Promise.resolve();if(s&&s.length>0){const o=document.getElementsByTagName("link"),t=document.querySelector("meta[property=csp-nonce]"),h=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));r=Promise.allSettled(s.map(n=>{if(n=g(n,a),n in m)return;m[n]=!0;const f=n.endsWith(".css"),b=f?'[rel="stylesheet"]':"";if(!!a)for(let d=o.length-1;d>=0;d--){const c=o[d];if(c.href===n&&(!f||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${b}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":O,f||(l.as="script"),l.crossOrigin="",l.href=n,h&&l.setAttribute("nonce",h),document.head.appendChild(l),f)return new Promise((d,c)=>{l.addEventListener("load",d),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})}))}function i(o){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=o,window.dispatchEvent(t),!t.defaultPrevented)throw o}return r.then(o=>{for(const t of o||[])t.status==="rejected"&&i(t.reason);return e().catch(i)})};class P{constructor(e){this.storage=e,this.difficultyDefaults=this.initializeDifficultyDefaults()}initializeDifficultyDefaults(){return{easy:{enableHints:!0,showPoints:!0,enableTimer:!1,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!0,showSpeedTimer:!1,speedMode:"bonus",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!0,enableMagicBlocks:!1},normal:{enableHints:!1,showPoints:!1,enableTimer:!1,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!1,showSpeedTimer:!1,speedMode:"ignored",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!1,enableMagicBlocks:!1},hard:{enableHints:!1,showPoints:!1,enableTimer:!0,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!0,showSpeedTimer:!0,speedMode:"ignored",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!1,enableMagicBlocks:!1},expert:{enableHints:!1,showPoints:!1,enableTimer:!0,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!0,showSpeedTimer:!0,speedMode:"punishment",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!1,enableMagicBlocks:!1}}}getSettingsForDifficulty(e){const s=this.difficultyDefaults[e]||{},a=this.getUserOverrides(e);return{...s,...a}}getUserOverrides(e){return this.storage.loadDifficultyOverrides()[e]||{}}saveSettingOverride(e,s,a){const r=this.storage.loadDifficultyOverrides();r[e]||(r[e]={});const i=this.difficultyDefaults[e]||{};a===i[s]?(delete r[e][s],Object.keys(r[e]).length===0&&delete r[e]):r[e][s]=a,this.storage.saveDifficultyOverrides(r)}resetToDefaults(e){const s=this.storage.loadDifficultyOverrides();delete s[e],this.storage.saveDifficultyOverrides(s)}resetAllToDefaults(){this.storage.saveDifficultyOverrides({})}getSettingNote(e){return{enableHints:{easy:"ON for easy",normal:"OFF for normal",hard:"OFF for hard",expert:"OFF for expert"},showPoints:{easy:"ON for easy",normal:"OFF for normal (clean interface)",hard:"OFF for hard (clean interface)",expert:"OFF for expert (clean interface)"},enableTimer:{easy:"OFF for easy",normal:"OFF for normal",hard:"ON for hard",expert:"ON for expert"},showPersonalBests:{easy:"ON for easy",normal:"OFF for normal",hard:"ON for hard",expert:"ON for expert"},showSpeedTimer:{easy:"OFF for easy",normal:"OFF for normal",hard:"ON for hard",expert:"ON for expert"},speedMode:{easy:"BONUS for easy",normal:"IGNORED for normal",hard:"IGNORED for hard",expert:"PUNISHMENT for expert"}}[e]||{}}isAtDefault(e,s){const a=this.difficultyDefaults[e]||{},r=this.getUserOverrides(e);return(r[s]!==void 0?r[s]:a[s])===a[s]}getDifficultiesWithOverrides(){const e=this.storage.loadDifficultyOverrides();return Object.keys(e).filter(s=>Object.keys(e[s]).length>0)}}export{P as D,p as _};
