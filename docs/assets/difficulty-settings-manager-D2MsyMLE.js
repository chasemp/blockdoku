const b="modulepreload",v=function(u,e){return new URL(u,e).href},m={},P=function(e,r,a){let s=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link"),t=document.querySelector("meta[property=csp-nonce]"),h=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));s=Promise.allSettled(r.map(n=>{if(n=v(n,a),n in m)return;m[n]=!0;const f=n.endsWith(".css"),O=f?'[rel="stylesheet"]':"";if(!!a)for(let d=i.length-1;d>=0;d--){const c=i[d];if(c.href===n&&(!f||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${O}`))return;const o=document.createElement("link");if(o.rel=f?"stylesheet":b,f||(o.as="script"),o.crossOrigin="",o.href=n,h&&o.setAttribute("nonce",h),document.head.appendChild(o),f)return new Promise((d,c)=>{o.addEventListener("load",d),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})}))}function l(i){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=i,window.dispatchEvent(t),!t.defaultPrevented)throw i}return s.then(i=>{for(const t of i||[])t.status==="rejected"&&l(t.reason);return e().catch(l)})};class g{constructor(e){this.storage=e,this.difficultyDefaults=this.initializeDifficultyDefaults()}initializeDifficultyDefaults(){return{easy:{enableHints:!0,showPoints:!0,enableTimer:!1,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!0,showSpeedTimer:!1,speedMode:"bonus",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!0},normal:{enableHints:!1,showPoints:!1,enableTimer:!1,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!1,showSpeedTimer:!1,speedMode:"ignored",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!1},hard:{enableHints:!1,showPoints:!1,enableTimer:!0,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!0,showSpeedTimer:!0,speedMode:"ignored",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!1},expert:{enableHints:!1,showPoints:!1,enableTimer:!0,enablePetrification:!1,enableDeadPixels:!1,showPersonalBests:!0,showSpeedTimer:!0,speedMode:"punishment",animationsEnabled:!0,soundEnabled:!1,pieceTimeoutEnabled:!1,enablePrizeRecognition:!1}}}getSettingsForDifficulty(e){const r=this.difficultyDefaults[e]||{},a=this.getUserOverrides(e);return{...r,...a}}getUserOverrides(e){return this.storage.loadDifficultyOverrides()[e]||{}}saveSettingOverride(e,r,a){const s=this.storage.loadDifficultyOverrides();s[e]||(s[e]={});const l=this.difficultyDefaults[e]||{};a===l[r]?(delete s[e][r],Object.keys(s[e]).length===0&&delete s[e]):s[e][r]=a,this.storage.saveDifficultyOverrides(s)}resetToDefaults(e){const r=this.storage.loadDifficultyOverrides();delete r[e],this.storage.saveDifficultyOverrides(r)}resetAllToDefaults(){this.storage.saveDifficultyOverrides({})}getSettingNote(e){return{enableHints:{easy:"ON for easy",normal:"OFF for normal",hard:"OFF for hard",expert:"OFF for expert"},showPoints:{easy:"ON for easy",normal:"OFF for normal (clean interface)",hard:"OFF for hard (clean interface)",expert:"OFF for expert (clean interface)"},enableTimer:{easy:"OFF for easy",normal:"OFF for normal",hard:"ON for hard",expert:"ON for expert"},showPersonalBests:{easy:"ON for easy",normal:"OFF for normal",hard:"ON for hard",expert:"ON for expert"},showSpeedTimer:{easy:"OFF for easy",normal:"OFF for normal",hard:"ON for hard",expert:"ON for expert"},speedMode:{easy:"BONUS for easy",normal:"IGNORED for normal",hard:"IGNORED for hard",expert:"PUNISHMENT for expert"}}[e]||{}}isAtDefault(e,r){const a=this.difficultyDefaults[e]||{},s=this.getUserOverrides(e);return(s[r]!==void 0?s[r]:a[r])===a[r]}getDifficultiesWithOverrides(){const e=this.storage.loadDifficultyOverrides();return Object.keys(e).filter(r=>Object.keys(e[r]).length>0)}}export{g as D,P as _};
