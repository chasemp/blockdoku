<!DOCTYPE html>
<!--
╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║                                                                                                             ║
║  ⚠️  AUTO-GENERATED FILE - DO NOT EDIT MANUALLY! ⚠️                                                         ║
║                                                                                                             ║
║  This file was automatically generated by Vite from source files in /src                                   ║
║  Any changes made directly to this file will be OVERWRITTEN on the next build.                             ║
║                                                                                                             ║
║  To make changes:                                                                                           ║
║  1. Edit the corresponding source file in /src                                                              ║
║  2. Run: npm run build                                                                                      ║
║  3. Test: npm run preview                                                                                   ║
║  4. Commit both /src and /docs changes                                                                      ║
║                                                                                                             ║
║  See DEPLOYMENT.md for complete workflow documentation.                                                     ║
║                                                                                                             ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════╝
-->

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Settings - Blockdoku</title>
    <link rel="stylesheet" href="data:text/css;base64,OnJvb3QgewogICAgLyogTGlnaHQgdGhlbWUgY29sb3JzICovCiAgICAtLWJnLWNvbG9yOiAjZmZmZmZmOwogICAgLS10ZXh0LWNvbG9yOiAjMzMzMzMzOwogICAgLS10ZXh0LW11dGVkOiAjNjY2NjY2OwogICAgLS1oZWFkZXItYmc6ICNmOGY5ZmE7CiAgICAtLWZvb3Rlci1iZzogI2Y4ZjlmYTsKICAgIC0tYm9hcmQtYmc6ICNmZmZmZmY7CiAgICAtLWJvcmRlci1jb2xvcjogI2RlZTJlNjsKICAgIC0tcHJpbWFyeS1jb2xvcjogIzAwN2JmZjsKICAgIC0tcHJpbWFyeS1ob3ZlcjogIzAwNTZiMzsKICAgIC0tc2Vjb25kYXJ5LWNvbG9yOiAjNmM3NTdkOwogICAgLS1zZWNvbmRhcnktaG92ZXI6ICM1NDViNjI7CiAgICAtLWVycm9yLWNvbG9yOiAjZGMzNTQ1OwogICAgLS1lcnJvci1ob3ZlcjogI2M4MjMzMzsKICAgIC0tc3VjY2Vzcy1jb2xvcjogIzI4YTc0NTsKICAgIC0tc3VjY2Vzcy1ob3ZlcjogIzIxODgzODsKICAgIC0tbmV1dHJhbC1jb2xvcjogIzZjNzU3ZDsKICAgIC0tbmV1dHJhbC1ob3ZlcjogIzVhNjI2ODsKICAgIC0tY2VsbC1iZzogI2ZmZmZmZjsKICAgIC0tY2VsbC1ib3JkZXI6ICNkZWUyZTY7CiAgICAtLWNlbGwtaG92ZXI6ICNlOWVjZWY7CiAgICAtLWJsb2NrLWNvbG9yOiAjMDA3YmZmOwogICAgLS1ibG9jay1ib3JkZXI6ICMwMDU2YjM7CiAgICAtLWdyaWQtbGluZTogI2RlZTJlNjsKICAgIC0taGlnaGxpZ2h0OiAjZmZmM2NkOwogICAgLS1jbGVhci1nbG93LWNvbG9yOiAjMDBmZjAwOwogICAgLS1hY2NlbnQtY29sb3I6ICMwMDU2YjM7CiAgICAtLWNhcmQtYmc6ICNmZmZmZmY7Cn0K" id="theme-css-light" media="not all">
    <link rel="stylesheet" href="data:text/css;base64,OnJvb3QgewogICAgLyogRGFyayB0aGVtZSBjb2xvcnMgLSBtb2Rlcm4gZGFyayB3aXRoIG5lb24gYWNjZW50cyAqLwogICAgLS1iZy1jb2xvcjogIzBhMGEwYTsKICAgIC0tdGV4dC1jb2xvcjogI2ZmZmZmZjsKICAgIC0tdGV4dC1tdXRlZDogI2IwYjBiMDsKICAgIC0taGVhZGVyLWJnOiAjMWExYTFhOwogICAgLS1mb290ZXItYmc6ICMxYTFhMWE7CiAgICAtLWJvYXJkLWJnOiAjMGYwZjBmOwogICAgLS1ib3JkZXItY29sb3I6ICMzMzMzMzM7CiAgICAtLXByaW1hcnktY29sb3I6ICMwMGQ0ZmY7CiAgICAtLXByaW1hcnktaG92ZXI6ICMwMDk5Y2M7CiAgICAtLXNlY29uZGFyeS1jb2xvcjogIzY2NjY2NjsKICAgIC0tc2Vjb25kYXJ5LWhvdmVyOiAjNTU1NTU1OwogICAgLS1lcnJvci1jb2xvcjogI2RjMzU0NTsKICAgIC0tZXJyb3ItaG92ZXI6ICNjODIzMzM7CiAgICAtLXN1Y2Nlc3MtY29sb3I6ICMyOGE3NDU7CiAgICAtLXN1Y2Nlc3MtaG92ZXI6ICMyMTg4Mzg7CiAgICAtLW5ldXRyYWwtY29sb3I6ICM2Yzc1N2Q7CiAgICAtLW5ldXRyYWwtaG92ZXI6ICM1YTYyNjg7CiAgICAtLWNlbGwtYmc6ICMwZjBmMGY7CiAgICAtLWNlbGwtYm9yZGVyOiAjMzMzMzMzOwogICAgLS1jZWxsLWhvdmVyOiAjMWExYTFhOwogICAgLS1ibG9jay1jb2xvcjogIzAwYWFjYzsKICAgIC0tYmxvY2stYm9yZGVyOiAjMDA3YWEzOwogICAgLS1ncmlkLWxpbmU6ICMzMzMzMzM7CiAgICAtLWhpZ2hsaWdodDogIzAwMWEzMzsKICAgIC0tY2xlYXItZ2xvdy1jb2xvcjogI2ZmNDQ0NDsKICAgIC0tYWNjZW50LWNvbG9yOiAjMDA5OWNjOwogICAgLS1jYXJkLWJnOiAjMWExYTFhOwp9CgovKiBEYXJrIHRoZW1lIGVmZmVjdHMgKi8KYm9keSB7CiAgICBiYWNrZ3JvdW5kLWltYWdlOiAKICAgICAgICByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDIwJSA4MCUsIHJnYmEoMCwgMjEyLCAyNTUsIDAuMDUpIDAlLCB0cmFuc3BhcmVudCA1MCUpLAogICAgICAgIHJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgODAlIDIwJSwgcmdiYSgwLCAyMTIsIDI1NSwgMC4wNSkgMCUsIHRyYW5zcGFyZW50IDUwJSksCiAgICAgICAgbGluZWFyLWdyYWRpZW50KDEzNWRlZywgdmFyKC0tYmctY29sb3IpIDAlLCB2YXIoLS1oZWFkZXItYmcpIDEwMCUpOwp9CgouZ2FtZS1ib2FyZC1jb250YWluZXIgewogICAgYmFja2dyb3VuZC1pbWFnZTogCiAgICAgICAgbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCB0cmFuc3BhcmVudCAyNSUsIHJnYmEoMCwgMjEyLCAyNTUsIDAuMDMpIDI1JSwgcmdiYSgwLCAyMTIsIDI1NSwgMC4wMykgNTAlLCB0cmFuc3BhcmVudCA1MCUsIHRyYW5zcGFyZW50IDc1JSwgcmdiYSgwLCAyMTIsIDI1NSwgMC4wMykgNzUlKSwKICAgICAgICBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCB2YXIoLS1ib2FyZC1iZykgMCUsIHZhcigtLWNlbGwtYmcpIDEwMCUpOwogICAgYmFja2dyb3VuZC1zaXplOiAyMHB4IDIwcHgsIDEwMCUgMTAwJTsKICAgIGJveC1zaGFkb3c6IDAgOHB4IDMycHggcmdiYSgwLCAyMTIsIDI1NSwgMC4xKTsKfQoKLmJsb2NrLXBhbGV0dGUgewogICAgYmFja2dyb3VuZC1pbWFnZTogCiAgICAgICAgbGluZWFyLWdyYWRpZW50KDkwZGVnLCB0cmFuc3BhcmVudCAyNSUsIHJnYmEoMCwgMjEyLCAyNTUsIDAuMDMpIDI1JSwgcmdiYSgwLCAyMTIsIDI1NSwgMC4wMykgNTAlLCB0cmFuc3BhcmVudCA1MCUsIHRyYW5zcGFyZW50IDc1JSwgcmdiYSgwLCAyMTIsIDI1NSwgMC4wMykgNzUlKSwKICAgICAgICBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCB2YXIoLS1oZWFkZXItYmcpIDAlLCB2YXIoLS1jZWxsLWJnKSAxMDAlKTsKICAgIGJhY2tncm91bmQtc2l6ZTogMTVweCAxNXB4LCAxMDAlIDEwMCU7CiAgICBib3gtc2hhZG93OiAwIDhweCAzMnB4IHJnYmEoMCwgMjEyLCAyNTUsIDAuMSk7Cn0K" id="theme-css-dark" media="not all">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8B4513">
    <script>
        // Function to update theme
        function updateTheme() {
            const savedSettings = localStorage.getItem('blockdoku_settings') || localStorage.getItem('blockdoku-settings');
            let theme = 'wood'; // Default to wood theme
            
            if (savedSettings) {
                try {
                    const settings = JSON.parse(savedSettings);
                    if (settings.theme) {
                        theme = settings.theme;
                    }
                } catch (e) {
                    console.log('Error parsing settings:', e);
                }
            }
            
            // Check if theme is already correctly applied to avoid redundant updates
            const currentThemeLink = document.getElementById('theme-css');
            const currentTheme = currentThemeLink ? currentThemeLink.href : '';
            const expectedThemeUrl = `../css/themes/${theme}.css`;
            
            if (currentTheme.includes(expectedThemeUrl)) {
                // Theme is already correctly applied, just ensure other themes are disabled
                const lightLink = document.getElementById('theme-css-light');
                const darkLink = document.getElementById('theme-css-dark');
                
                if (lightLink) lightLink.disabled = true;
                if (darkLink) darkLink.disabled = true;
                
                // Set data-theme attribute for CSS selectors
                document.documentElement.setAttribute('data-theme', theme);
                document.body.className = document.body.className.replace(/light-theme|dark-theme|wood-theme/g, '');
                document.body.classList.add(`${theme}-theme`);
                return;
            }
            
            // Apply the theme
            let themeLink = document.getElementById('theme-css');
            if (!themeLink) {
                themeLink = document.createElement('link');
                themeLink.rel = 'stylesheet';
                themeLink.id = 'theme-css';
                document.head.appendChild(themeLink);
            }
            const themeUrl = `../css/themes/${theme}.css`;
            console.log('Client-side theme update:', theme);
            themeLink.href = themeUrl;
            
            // Disable other theme CSS files
            const lightLink = document.getElementById('theme-css-light');
            const darkLink = document.getElementById('theme-css-dark');
            
            if (lightLink) {
                lightLink.disabled = true;
            }
            if (darkLink) {
                darkLink.disabled = true;
            }

            // If Vite injected a wood stylesheet into built HTML, disable it when switching away
            try {
                const builtWoodLinks = Array.from(document.querySelectorAll('link[rel="stylesheet"]'))
                    .filter(l => (l.getAttribute('href') || '').includes('/assets/wood-') || (l.href || '').includes('/assets/wood-'));
                builtWoodLinks.forEach(l => {
                    l.disabled = theme !== 'wood';
                });
            } catch (e) {}
            
            // Set data-theme attribute for CSS selectors
            document.documentElement.setAttribute('data-theme', theme);
            
            // Add theme class to body
            document.body.className = document.body.className.replace(/light-theme|dark-theme|wood-theme/g, '');
            document.body.classList.add(`${theme}-theme`);
        }
        
        // Load current theme from localStorage on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Add a small delay to ensure everything is loaded
            setTimeout(updateTheme, 100);
        });
        
        // Listen for theme changes from other pages
        window.addEventListener('storage', function(e) {
            if (e.key === 'blockdoku-settings' || e.key === 'blockdoku_settings') {
                updateTheme();
            }
        });
        
        // Also listen for focus events (when returning from main page)
        window.addEventListener('focus', function() {
            updateTheme();
        });
    </script>
    <meta name="description" content="Blockdoku - A modern take on the classic block puzzle game">
    <meta name="keywords" content="blockdoku, puzzle, game, blocks, tetris, mobile, pwa">
    <meta name="author" content="Chase Pettet">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blockdoku.523.life/">
    <meta property="og:title" content="Blockdoku - Block Puzzle Game">
    <meta property="og:description" content="A modern take on the classic block puzzle game. Play anywhere, anytime!">
    <meta property="og:image" content="https://blockdoku.523.life/icons/icon-512x512.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://blockdoku.523.life/">
    <meta property="twitter:title" content="Blockdoku - Block Puzzle Game">
    <meta property="twitter:description" content="A modern take on the classic block puzzle game. Play anywhere, anytime!">
    <meta property="twitter:image" content="https://blockdoku.523.life/icons/icon-512x512.png">
  <script type="module" crossorigin src="./assets/gamesettings-CBCSRwDz.js"></script>
  <link rel="modulepreload" crossorigin href="./assets/modulepreload-polyfill-B5Qt9EMX.js">
  <link rel="modulepreload" crossorigin href="./assets/difficulty-settings-manager-BP-zScMF.js">
  <link rel="modulepreload" crossorigin href="./assets/confirmation-dialog-BNWM4rCu.js">
  <link rel="stylesheet" crossorigin href="./assets/main-2IqKqCfo.css">
  <link rel="stylesheet" crossorigin href="./assets/wood-36S1T1G_.css">
<link rel="manifest" href="./manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="./registerSW.js"></script></head>
<body>
    <div class="settings-container">
        <header class="settings-header">
            <h1 style="text-align: center;">Game Settings</h1>
            <p style="text-align: center;">Customize your Blockdoku gameplay experience</p>
        </header>
        
        <!-- Navigation Buttons -->
        <div class="navigation-buttons" style="margin-bottom: 2rem;">
            <a href="../settings.html" class="back-button">
                ← Settings
            </a>
            <a href="../index.html" class="back-button">
                Game →
            </a>
        </div>
        
        <div class="settings-content">
            <!-- Utility Bar Settings: Controls 4 optional items in the utility bar (hints, timer, personal best, speed timer) -->
            <div class="utility-bar-settings settings-section-container">
                <h3 style="margin: 1.5rem 0 1rem 0; color: var(--text-color); font-size: 1.1rem; text-align: center;">Utility Bar</h3>
                <p class="setting-description" style="margin-bottom: 1rem; margin-left: 0; text-align: center;">Configure what appears in the utility bar during gameplay.</p>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enable-hints" />
                            Enable hints
                            <span class="setting-bubble" data-setting="hints">💡 hints</span>
                        </label>
                        <p class="setting-description">Show placement suggestions for blocks when you're stuck</p>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enable-timer" />
                            Enable countdown
                            <span class="setting-bubble" data-setting="timer">⏳ countdown</span>
                        </label>
                        <p class="setting-description">Add time pressure to increase difficulty and excitement</p>
                    </div>
                    <div class="setting-item" id="countdown-duration-container" style="margin-left: 2rem; display: none;">
                        <label for="countdown-duration">Countdown Duration: <span id="countdown-duration-value">3:00</span></label>
                        <input type="range" id="countdown-duration" min="3" max="10" value="3" step="1" style="width: 100%; max-width: 300px; margin-top: 0.5rem;" />
                        <p class="setting-description" style="font-size: 0.85rem; margin-top: 0.5rem;">3 = 3 minutes, 10 = 10 minutes</p>
                    </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="show-personal-bests" />
                            Enable Personal Best
                            <span class="setting-bubble" data-setting="personalBest">🏆 best</span>
                            </label>
                        <p class="setting-description">Display your personal best score for the current difficulty level in the utility bar</p>
                </div>
                
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="show-speed-timer" />
                            Enable Speed Timer
                            <span class="setting-bubble" data-setting="speedTimer">⚡ speed</span>
                        </label>
                        <p class="setting-description">Display speed timer in the utility bar when speed mode is active</p>
                    </div>
                    <div class="setting-item" id="speed-timer-duration-container" style="margin-left: 2rem; display: none;">
                        <label for="speed-timer-duration" style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span>Speed Timer Duration:</span>
                            <span id="speed-timer-duration-value" style="font-weight: bold; color: var(--primary-color);">10s</span>
                        </label>
                        <input type="range" id="speed-timer-duration" min="1" max="20" value="10" step="1" style="width: 100%; margin-bottom: 0.5rem;">
                        <p class="setting-description" style="margin: 0; font-size: 0.8rem; color: var(--text-color-secondary);">1 = 1 second, 20 = 20 seconds (maximum duration for speed bonuses/punishments)</p>
                    </div>
                    <div class="setting-item" id="speed-timer-precision-container" style="margin-left: 2rem; display: none;">
                        <label for="speed-timer-precision" style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span>Timer Precision:</span>
                            <span id="speed-timer-precision-value" style="font-weight: bold; color: var(--primary-color);">Seconds</span>
                        </label>
                        <select id="speed-timer-precision" style="width: 100%; padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px; background: var(--background-color); color: var(--text-color);">
                            <option value="seconds">Seconds (1s, 2s, 3s...)</option>
                            <option value="milliseconds">Milliseconds (1.2s, 2.5s, 3.7s...)</option>
                            <option value="high-precision">High Precision (1.23s, 2.45s, 3.67s...)</option>
                        </select>
                        <p class="setting-description" style="margin: 0; font-size: 0.8rem; color: var(--text-color-secondary);">Choose how precise the speed timer display should be</p>
                    </div>
                    
                    
                    <!-- Link to difficulty defaults -->
                    <div style="text-align: center; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                        <a href="#" id="view-difficulty-defaults-link" style="color: var(--primary-color); text-decoration: none; font-size: 0.9rem; font-weight: 500;">
                            📋 View defaults by difficulty level
                        </a>
                    </div>
                </div>
                
            <!-- Speed Tracking Mode Section -->
            <div class="speed-tracking-mode-settings settings-section-container">
                    <h3 style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        Speed Tracking
                        <span class="setting-bubble speed-mode-bubble" data-setting="speedMode">🏃 mode</span>
                    </h3>
                    <p class="setting-description" style="margin-bottom: 1rem; margin-left: 0; text-align: center;">Choose how placement speed affects your score</p>
                    <div class="speed-mode-options">
                        <label class="speed-mode-option">
                            <input type="radio" name="speed-mode" value="bonus" id="speed-mode-bonus" />
                            <span class="speed-mode-label">
                                <strong>Bonus</strong>
                                <small>Faster = more points.<br>Earn bonus points for quick placements.</small>
                            </span>
                        </label>
                        <label class="speed-mode-option">
                            <input type="radio" name="speed-mode" value="ignored" id="speed-mode-ignored" checked />
                            <span class="speed-mode-label">
                                <strong>Ignored</strong>
                                <small>Speed doesn't affect score.<br>Play at your own pace.</small>
                            </span>
                        </label>
                        <label class="speed-mode-option">
                            <input type="radio" name="speed-mode" value="punishment" id="speed-mode-punishment" />
                            <span class="speed-mode-label">
                                <strong>Punishment</strong>
                                <small>Slower = less points.<br>Any second past 1 second subtracts a point per second down to 0.</small>
                            </span>
                        </label>
                    </div>
                </div>
                
        <!-- Difficulty Selector Section -->
        <div class="difficulty-selector-section settings-section-container">
            <h3>Difficulty Level</h3>
            <p class="setting-description" style="margin-bottom: 1.5rem; margin-left: 0; text-align: center;">Choose your preferred difficulty level. Each level has different default settings.</p>
            <div class="difficulty-options">
                <button class="difficulty-option" data-difficulty="easy">
                    <div class="difficulty-header">
                        <h4>Easy</h4>
                        <span class="difficulty-badge easy">EASY</span>
                    </div>
                    <p>Larger blocks, slower pace, hints available</p>
                </button>
                <button class="difficulty-option" data-difficulty="normal">
                    <div class="difficulty-header">
                        <h4>Normal</h4>
                        <span class="difficulty-badge normal">NORMAL</span>
                    </div>
                    <p>Standard block variety, moderate pace</p>
                </button>
                <button class="difficulty-option" data-difficulty="hard">
                    <div class="difficulty-header">
                        <h4>Hard</h4>
                        <span class="difficulty-badge hard">HARD</span>
                    </div>
                    <p>Smaller blocks, faster pace, no hints</p>
                </button>
                <button class="difficulty-option" data-difficulty="expert">
                    <div class="difficulty-header">
                        <h4>Expert</h4>
                        <span class="difficulty-badge expert">EXPERT</span>
                    </div>
                    <p>Complex shapes, time pressure, limited moves</p>
                </button>
            </div>
                </div>
                
                <!-- Combo Display Settings -->
            <div class="combo-display-settings settings-section-container">
                    <h3>Combo Display</h3>
                    <p class="setting-description" style="margin-bottom: 1rem; margin-left: 0;">Choose how combo points are displayed during gameplay</p>
                    <div class="combo-options">
                        <label class="combo-option">
                            <input type="radio" name="combo-display-mode" value="streak" id="combo-streak" />
                            <span class="combo-label">Streak</span>
                            <span class="combo-description">Show current streak count</span>
                        </label>
                        <label class="combo-option">
                            <input type="radio" name="combo-display-mode" value="cumulative" id="combo-cumulative" checked />
                            <span class="combo-label">Cumulative</span>
                            <span class="combo-description">Show total combo points earned</span>
                        </label>
                    </div>
                </div>
                
            <!-- Basic Game Settings -->
            <div class="basic-game-settings settings-section-container">
                    <h3 style="text-align: center;">Basic</h3>
                    <p class="setting-description" style="margin-bottom: 1rem; margin-left: 0; text-align: center;">Essential settings and smart features to improve your gameplay experience.</p>
                    
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="sound-enabled" />
                        Sound effects
                        <span class="setting-bubble" data-setting="sound">🔊</span>
                    </label>
                    <p class="setting-description">Play audio feedback for game actions and events</p>
                </div>
                    
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="auto-save" />
                            Auto-save game
                            <span class="setting-bubble" data-setting="autoSave">💾</span>
                        </label>
                        <p class="setting-description">Automatically save your progress so you can resume later</p>
                    </div>
                    
                    <!-- Auto-Rotate Blocks -->
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="auto-rotate-blocks" />
                            Auto-rotate blocks
                            <span class="setting-bubble" data-setting="autoRotate">🔄 smart</span>
                        </label>
                        <p class="setting-description">Automatically rotate blocks when there's only one valid orientation for placement. Saves time and reduces frustration!</p>
                    </div>
                    
                    <!-- Piece Timeout -->
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="piece-timeout-enabled" />
                            Enable Piece Timeout
                            <span class="setting-bubble" data-setting="timeout">⏰ timeout</span>
                        </label>
                        <p class="setting-description">Auto-end game when pieces timeout (15s warning, 30s timeout). Prevents getting stuck with difficult pieces!</p>
                    </div>
                    
                    <!-- Block Rotation (Parent Setting) -->
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="enable-block-rotation" />
                            Allow block rotation
                            <span class="setting-bubble" data-setting="rotation">🔄</span>
                        </label>
                        <p class="setting-description">Enable the ability to rotate blocks by double-clicking or tapping them</p>
                    </div>
                    <div class="setting-item" id="rotate-button-container" style="margin-left: 2rem; display: none;">
                        <label>
                            <input type="checkbox" id="show-rotate-button" />
                            Show rotate button
                            <span class="setting-bubble" data-setting="rotateButton">↻</span>
                        </label>
                        <p class="setting-description" style="font-size: 0.85rem; margin-top: 0.5rem;">Display a rotate button below available blocks. Useful on desktop as an alternative to double-click/tap.</p>
                    </div>
                </div>
                
            <!-- Game Modes Section -->
            <div class="game-modes-settings settings-section-container">
                    <h3>Game Modes</h3>
                    <p class="setting-description" style="margin-bottom: 1rem; margin-left: 0; text-align: center;">Enable special game modes that add unique challenges and mechanics.</p>
                    <p class="setting-description" style="margin-bottom: 1rem; margin-left: 0; text-align: center;">Most modes can be active simultaneously, but these are never activated by default.</p>
                    
                    <!-- Petrification Mode -->
                    <div class="setting-item game-mode-item">
                        <label>
                            <input type="checkbox" id="enable-petrification" />
                            Enable petrification
                            <span class="setting-bubble" data-setting="petrification">🪨</span>
                        </label>
                        <p class="setting-description">Grid cells petrify after 10s and blocks after 30s in place. Petrified cells can't be cleared until a clear event happens. Adds strategic time pressure!</p>
                    </div>
                    
                    <!-- Dead Pixels Mode -->
                    <div class="setting-item game-mode-item">
                        <label>
                            <input type="checkbox" id="enable-dead-pixels" />
                            Enable dead pixels
                            <span class="setting-bubble" data-setting="deadPixels">💀</span>
                        </label>
                        <p class="setting-description">Add "dead" pixels to the board that cannot be used for block placement, like a broken screen. Toggle on/off anytime!</p>
                    </div>
                    <div class="setting-item" id="dead-pixels-intensity-container" style="margin-left: 2rem; display: none;">
                        <label for="dead-pixels-intensity">Dead Pixels Intensity: <span id="dead-pixels-intensity-value">0</span></label>
                        <input type="range" id="dead-pixels-intensity" min="0" max="5" value="0" step="1" style="width: 100%; max-width: 300px; margin-top: 0.5rem;" />
                        <p class="setting-description" style="font-size: 0.85rem; margin-top: 0.5rem;">0 = Off, 5 = Maximum dead pixels (~15-20)</p>
                    </div>
                    
                    <!-- Magic Blocks Mode -->
                    <div class="setting-item game-mode-item">
                        <label>
                            <input type="checkbox" id="enable-magic-blocks" />
                            Enable magic blocks
                            <span class="setting-bubble" data-setting="magicBlocks">🔮 magic</span>
                        </label>
                        <p class="setting-description">Occasionally generate special magic blocks that automatically clear any line they complete when placed. Adds exciting power-up gameplay!</p>
                    </div>
                    <div class="setting-item" id="magic-blocks-frequency-container" style="margin-left: 2rem; display: none;">
                        <label for="magic-blocks-frequency">Magic Block Frequency: <span id="magic-blocks-frequency-value">1 in 10</span> (<span id="magic-blocks-frequency-percent">10%</span>)</label>
                        <input type="range" id="magic-blocks-frequency" min="1" max="10" value="1" step="1" style="width: 100%; max-width: 300px; margin-top: 0.5rem;" />
                        <p class="setting-description" style="font-size: 0.85rem; margin-top: 0.5rem;">1 = 1 in 10 blocks (10%), 10 = 10 in 10 blocks (100%)</p>
                    </div>
                    
                    <!-- Wild Block Shapes Mode -->
                    <div class="setting-item game-mode-item">
                        <label>
                            <input type="checkbox" id="enable-wild-shapes" />
                            Enable wild block shapes
                            <span class="setting-bubble" data-setting="wildShapes">🔥 shapes</span>
                        </label>
                        <p class="setting-description">Add creative block shapes like pentominos, crosses, hollow blocks, and zigzag patterns. Makes gameplay more varied and challenging!</p>
                    </div>
                    <div class="setting-item" id="wild-shapes-frequency-container" style="margin-left: 2rem; display: none;">
                        <label for="wild-shapes-frequency">Wild Shapes Frequency: <span id="wild-shapes-frequency-value">1 in 10</span> (<span id="wild-shapes-frequency-percent">10%</span>)</label>
                        <input type="range" id="wild-shapes-frequency" min="1" max="10" value="1" step="1" style="width: 100%; max-width: 300px; margin-top: 0.5rem;" />
                        <p class="setting-description" style="font-size: 0.85rem; margin-top: 0.5rem;">1 = 1 in 10 blocks (10%), 10 = 10 in 10 blocks (100%)</p>
                    </div>
                </div>
                
                
                <div style="display: flex; flex-direction: column; gap: 1rem; align-items: center; margin-top: 2rem; width: 100%;">
                    <button id="reset-current-difficulty" class="reset-button" style="max-width: 400px; width: 100%;">
                        <span id="current-difficulty-text">Reset</span>
                    </button>
                    <button id="reset-all-difficulties" class="reset-button" style="max-width: 400px; width: 100%;">
                        Reset All Levels
                    </button>
                </div>
                </div>
                
            <!-- Toggle for difficulty defaults table -->
            <div class="toggle-container">
                <button id="toggle-difficulty-defaults" class="toggle-button">
                    <span id="toggle-text">📋 Show Defaults by Difficulty</span>
                    <span id="toggle-arrow" class="toggle-arrow">▼</span>
                    </button>
                </div>
            
            <!-- Difficulty defaults table -->
            <div id="difficulty-defaults-table" class="difficulty-defaults-table" style="display: none;">
                <h4>Default Settings by Difficulty Level</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Setting</th>
                            <th>Easy</th>
                            <th>Normal</th>
                            <th>Hard</th>
                            <th>Expert</th>
                        </tr>
                    </thead>
                    <tbody id="defaults-table-body">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Bottom Navigation Buttons -->
        <div class="navigation-buttons" style="margin-top: 2rem;">
            <a href="../settings.html" class="back-button">
                ← Settings
            </a>
            <a href="../index.html" class="back-button">
                Game →
            </a>
        </div>
        
    </div>
    
    <!-- Copyright Notice -->
    <div class="copyright-notice">
        <p>&copy; Chase Pettet, <a href="http://523.life" target="_blank" rel="noopener noreferrer">523.life</a></p>
    </div>

    <!-- Scripts -->
</body>
</html>
